@startuml Sequence-Register
actor "Người dùng" as User
participant "Trang Đăng Ký\n(Client)" as Client
participant "API Đăng Ký\n(/api/auth/register)" as API
participant "Model Người Dùng" as Model
database MongoDB

User -> Client: Gửi Form (tên, email, mật khẩu)
activate Client
Client -> API: POST /api/auth/register
activate API

API -> API: Kiểm tra dữ liệu đầu vào
API -> Model: findOne({email})
activate Model
Model -> MongoDB: Truy vấn CSDL
activate MongoDB
MongoDB --> Model: Kết quả (null)
deactivate MongoDB
Model --> API: null
deactivate Model

API -> API: Mã hóa mật khẩu
API -> Model: create(userData)
activate Model
Model -> MongoDB: Thêm tài liệu
activate MongoDB
MongoDB --> Model: Thành công
deactivate MongoDB
Model --> API: Đối tượng Người dùng
deactivate Model

API --> Client: 201 Created
deactivate API
Client --> User: Hiển thị thành công/Chuyển hướng
deactivate Client
@enduml
